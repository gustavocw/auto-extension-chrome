import{r as s,j as e,R as C,a as B}from"./client.js";const S=()=>new Promise(l=>{chrome.storage.local.get(["capturedProjects"],n=>{l(n.capturedProjects||[])})}),P=()=>{const[l,n]=s.useState([]),[g,h]=s.useState([]),[x,i]=s.useState(!0),[c,b]=s.useState(!1),[r,N]=s.useState({minBudget:"",maxBudget:""}),[d,v]=s.useState(()=>({hourlyRate:localStorage.getItem("workana_hourly_rate")||"100",aboutYou:localStorage.getItem("workana_about_you")||"",marketingMethodology:localStorage.getItem("workana_marketing_methodology")||""}));s.useEffect(()=>{(async()=>{try{i(!0);const a=await S();n(a),h(a)}catch{i(!1)}finally{i(!1)}})()},[]),s.useEffect(()=>{y()},[r,l]);const y=()=>{let t=[...l];r.minBudget&&(t=t.filter(a=>j(a.budget)>=parseFloat(r.minBudget))),r.maxBudget&&(t=t.filter(a=>j(a.budget)<=parseFloat(r.maxBudget))),h(t)},j=t=>{const a=t.match(/R\$\s*([\d.,]+)/);return a&&a[1]?parseFloat(a[1].replace(".","").replace(",",".")):0},p=t=>{chrome.tabs.create({url:t})},u=t=>{const{name:a,value:o}=t.target;v(m=>({...m,[a]:o})),a==="hourlyRate"?localStorage.setItem("workana_hourly_rate",o):a==="aboutYou"?localStorage.setItem("workana_about_you",o):a==="marketingMethodology"&&localStorage.setItem("workana_marketing_methodology",o)},f=t=>{const{name:a,value:o}=t.target;N(m=>({...m,[a]:o}))},k=()=>{b(!c)};return e.jsxs("div",{className:"projects-container",children:[e.jsx("h1",{className:"projects-title",children:"Find Work"}),e.jsxs("div",{className:"config-section",children:[e.jsx("button",{className:"config-toggle-button",onClick:k,children:c?"Esconder Configurações":"Mostrar Configurações"}),c&&e.jsxs("div",{className:"config-panel",children:[e.jsxs("div",{className:"config-field",children:[e.jsx("label",{htmlFor:"hourlyRate",children:"Taxa horária (R$):"}),e.jsx("input",{type:"number",id:"hourlyRate",name:"hourlyRate",value:d.hourlyRate,onChange:u,className:"config-input",min:"1"})]}),e.jsxs("div",{className:"config-field",children:[e.jsx("label",{htmlFor:"aboutYou",children:"Sobre você/sua empresa:"}),e.jsx("textarea",{id:"aboutYou",name:"aboutYou",value:d.aboutYou,onChange:u,className:"config-textarea",placeholder:"Descreva seu perfil profissional, projetos anteriores, habilidades, etc."})]}),e.jsxs("div",{className:"config-field",children:[e.jsx("label",{htmlFor:"marketingMethodology",children:"Metodologia de marketing preferida:"}),e.jsx("textarea",{id:"marketingMethodology",name:"marketingMethodology",value:d.marketingMethodology,onChange:u,className:"config-textarea",placeholder:"Descreva sua abordagem de marketing, metodologia, ou qualquer informação específica"})]}),e.jsx("div",{className:"config-info",children:e.jsx("p",{children:"Estas configurações serão usadas para personalizar as propostas geradas pelo GPT."})})]})]}),e.jsxs("div",{className:"filters-section",children:[e.jsx("h2",{className:"filters-title",children:"Filtrar projetos"}),e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"filter-field",children:[e.jsx("label",{htmlFor:"minBudget",children:"Orçamento mínimo (R$):"}),e.jsx("input",{type:"number",id:"minBudget",name:"minBudget",value:r.minBudget,onChange:f,className:"filter-input",min:"0",placeholder:"Min"})]}),e.jsxs("div",{className:"filter-field",children:[e.jsx("label",{htmlFor:"maxBudget",children:"Orçamento máximo (R$):"}),e.jsx("input",{type:"number",id:"maxBudget",name:"maxBudget",value:r.maxBudget,onChange:f,className:"filter-input",min:"0",placeholder:"Max"})]})]})]}),x?e.jsx("div",{className:"loading",children:e.jsx("p",{children:"Carregando projetos..."})}):g.length===0?e.jsx("div",{className:"no-projects",children:e.jsx("p",{children:l.length===0?"Nenhum projeto encontrado. Navegue até a página de listagem do Workana para capturar projetos.":"Nenhum projeto corresponde aos filtros aplicados."})}):e.jsx("div",{className:"projects-list",children:g.map((t,a)=>e.jsxs("div",{className:"project-card",onClick:()=>p(t.link),children:[e.jsxs("div",{className:"project-header",children:[e.jsx("h2",{className:"project-title",children:t.title}),e.jsx("span",{className:"project-budget",children:t.budget})]}),e.jsx("p",{className:"project-description",children:t.description}),e.jsx("div",{className:"project-actions",children:e.jsx("button",{className:"view-button",onClick:o=>{o.stopPropagation(),p(t.link)},children:"Automatizar"})})]},a))})]})};C.createRoot(document.getElementById("root")).render(e.jsx(B.StrictMode,{children:e.jsx(P,{})}));
